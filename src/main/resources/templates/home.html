<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>StockCoin - ì‹¤ì‹œê°„ ì£¼ì‹Â·ì½”ì¸ ì‹œì„¸</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/home.css" rel="stylesheet">
</head>

<body class="d-flex flex-column min-vh-100">

<!-- Navbar -->
<th:block th:replace="fragments/navbar :: navbar"></th:block>

<!-- Hero Section -->
<section class="hero-section">
    <div class="container text-center">
        <h1 class="hero-title">ğŸ“ˆ StockCoin</h1>
        <p class="hero-subtitle">ì‹¤ì‹œê°„ ì£¼ì‹ & ì½”ì¸ ì‹œì„¸ë¥¼ í•œëˆˆì—</p>
        <div class="hero-buttons">
            <a href="/priceStock" class="btn btn-hero btn-primary">ì£¼ì‹ ì‹œì„¸ ë³´ê¸°</a>
            <a href="/priceCoin" class="btn btn-hero btn-success">ì½”ì¸ ì‹œì„¸ ë³´ê¸°</a>
        </div>
    </div>
</section>

<!-- Main Content -->
<main class="flex-fill container my-5">

    <!-- ì˜¤ëŠ˜ì˜ ì£¼ìš” ì‹œì„¸ -->
    <section class="mb-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="section-title">ğŸ”¥ ì˜¤ëŠ˜ì˜ ì£¼ìš” ì¢…ëª©</h2>
            <small class="text-muted">ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸</small>
        </div>

        <div class="row g-4">
            <div class="col-md-3 col-sm-6">
                <div class="price-card card-up">
                    <div class="card-icon">ğŸ“Š</div>
                    <h5 class="card-name">ì‚¼ì„±ì „ì</h5>
                    <p class="card-price">72,300ì›</p>
                    <small class="card-change text-up">â–² +0.8%</small>
                </div>
            </div>

            <div class="col-md-3 col-sm-6">
                <div class="price-card card-up">
                    <div class="card-icon">ğŸš—</div>
                    <h5 class="card-name">í˜„ëŒ€ì°¨</h5>
                    <p class="card-price">184,000ì›</p>
                    <small class="card-change text-up">â–² +1.3%</small>
                </div>
            </div>

            <div class="col-md-3 col-sm-6">
                <div class="price-card card-up">
                    <div class="card-icon">â‚¿</div>
                    <h5 class="card-name">ë¹„íŠ¸ì½”ì¸</h5>
                    <p class="card-price">96,500,000ì›</p>
                    <small class="card-change text-up">â–² +2.1%</small>
                </div>
            </div>

            <div class="col-md-3 col-sm-6">
                <div class="price-card card-down">
                    <div class="card-icon">Î</div>
                    <h5 class="card-name">ì´ë”ë¦¬ì›€</h5>
                    <p class="card-price">5,200,000ì›</p>
                    <small class="card-change text-down">â–¼ -0.5%</small>
                </div>
            </div>
        </div>
    </section>

    <!-- ì‹¤ì‹œê°„ ì°¨íŠ¸ -->
    <section class="mb-5">
        <h2 class="section-title mb-4">ğŸ“Š ì‹¤ì‹œê°„ ì°¨íŠ¸</h2>

        <div class="row g-4">
            <!-- ì£¼ì‹ ì°¨íŠ¸ -->
            <div class="col-lg-6">
                <div class="chart-box">
                    <div class="chart-header">
                        <h4>ì£¼ì‹ ì°¨íŠ¸</h4>
                        <span class="badge bg-primary">LIVE</span>
                    </div>
                    <div class="chart-container">
                        <canvas id="stockChart"></canvas>
                    </div>
                    <a href="/priceStock" class="btn btn-outline-dark w-100 mt-3">
                        êµ­ë‚´ì£¼ì‹ ì „ì²´ë³´ê¸° â†’
                    </a>
                </div>
            </div>

            <!-- ì½”ì¸ ì°¨íŠ¸ -->
            <div class="col-lg-6">
                <div class="chart-box">
                    <div class="chart-header">
                        <h4>ì½”ì¸ ì°¨íŠ¸</h4>
                        <span class="badge bg-success">LIVE</span>
                    </div>
                    <div class="chart-container">
                        <canvas id="coinChart"></canvas>
                    </div>
                    <a href="/priceCoin" class="btn btn-outline-dark w-100 mt-3">
                        ì½”ì¸ì‹œì„¸ ì „ì²´ë³´ê¸° â†’
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- ìµœì‹  ì±„íŒ… -->
    <section class="mb-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="section-title">ğŸ’¬ ì‹¤ì‹œê°„ ì±„íŒ…</h2>
            <a href="/chat" class="btn btn-sm btn-dark">ì±„íŒ…ë°© ì…ì¥ â†’</a>
        </div>

        <div class="chat-box">
            <th:block th:each="chat : ${latestChat}">
                <div class="chat-item">
                    <strong class="chat-sender" th:text="${chat.sender}"></strong>
                    <span class="chat-message" th:text="${chat.message}"></span>
                </div>
            </th:block>

            <th:block th:if="${#lists.isEmpty(latestChat)}">
                <div class="chat-empty">
                    <p>ğŸ’­ ì•„ì§ ì±„íŒ…ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ë©”ì‹œì§€ë¥¼ ë‚¨ê²¨ë³´ì„¸ìš”!</p>
                </div>
            </th:block>
        </div>
    </section>

</main>

<!-- Footer -->
<footer class="bg-dark text-light text-center py-4 mt-auto">
    <div class="container">
        <p class="mb-2">Â© 2025 StockCoin Project</p>
        <small class="text-muted">ì‹¤ì‹œê°„ ì£¼ì‹ Â· ì½”ì¸ ì‹œì„¸ í”Œë«í¼</small>
    </div>
</footer>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- ì°¨íŠ¸ ìŠ¤í¬ë¦½íŠ¸ -->
<script>
    // ì£¼ì‹ ì°¨íŠ¸
    const stockCtx = document.getElementById('stockChart');
    new Chart(stockCtx, {
        type: 'line',
        data: {
            labels: ['10:00', '10:30', '11:00', '11:30', '12:00', '12:30', '13:00'],
            datasets: [{
                label: 'ì‚¼ì„±ì „ì',
                data: [70000, 70500, 70200, 71000, 71500, 72000, 72300],
                borderColor: '#dc3545',
                backgroundColor: 'rgba(220, 53, 69, 0.1)',
                borderWidth: 3,
                tension: 0.4,
                fill: true,
                pointRadius: 4,
                pointHoverRadius: 6
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: true, position: 'top' }
            },
            scales: {
                y: {
                    beginAtZero: false,
                    grid: { color: 'rgba(0,0,0,0.05)' }
                },
                x: {
                    grid: { display: false }
                }
            }
        }
    });

    // ì½”ì¸ ì°¨íŠ¸
    const coinCtx = document.getElementById('coinChart');
    new Chart(coinCtx, {
        type: 'line',
        data: {
            labels: ['10:00', '10:30', '11:00', '11:30', '12:00', '12:30', '13:00'],
            datasets: [{
                label: 'BTC',
                data: [95000, 95500, 96000, 95800, 96200, 96500, 96800],
                borderColor: '#198754',
                backgroundColor: 'rgba(25, 135, 84, 0.1)',
                borderWidth: 3,
                tension: 0.4,
                fill: true,
                pointRadius: 4,
                pointHoverRadius: 6
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: true, position: 'top' }
            },
            scales: {
                y: {
                    beginAtZero: false,
                    grid: { color: 'rgba(0,0,0,0.05)' }
                },
                x: {
                    grid: { display: false }
                }
            }
        }
    });
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>