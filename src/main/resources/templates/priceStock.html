<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>StockCoin - 국내 주식 시세</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- 기존 CSS 먼저 로드 (테이블 스타일) -->
    <link href="/css/priceCommon.css" rel="stylesheet">
    <link href="/css/price.css" rel="stylesheet">
    <!-- 새 스타일 (주변 UI만 덮어쓰기) -->
    <link href="/css/priceStock.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="d-flex flex-column min-vh-100">

<!-- Navbar -->
<th:block th:replace="fragments/navbar :: navbar"></th:block>

<!-- Page Header -->
<section class="page-header">
    <div class="container">
        <h1 class="page-title">📊 실시간 주식 시세</h1>
        <p class="page-subtitle">국내 주요 종목의 실시간 가격 정보</p>
    </div>
</section>

<!-- Main Content -->
<main class="flex-fill container my-5">

    <!-- 탭 네비게이션 -->
    <ul class="nav nav-tabs mb-4">
        <li class="nav-item">
            <a class="nav-link active" href="/priceStock">📈 국내</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/priceCoin">₿ 코인</a>
        </li>
    </ul>

    <!-- 검색 & 컨트롤 -->
    <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-3">
        <div class="input-group" style="max-width: 500px;">
            <input type="text" id="searchInput" class="form-control"
                   placeholder="종목명 또는 코드 검색">
            <button class="btn" id="searchBtn">검색</button>
        </div>
        <div class="text-end">
            <button class="btn btn-outline-dark" id="refreshBtn">🔄 새로고침</button>
            <div id="updateTime" class="mt-2">
                마지막 업데이트: -
            </div>
        </div>
    </div>

    <!-- 로딩 스피너 -->
    <div id="loadingSpinner" class="loading-spinner">
        <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <!-- 주식 테이블 (기존 그대로) -->
    <table class="table table-hover text-center align-middle" style="display:none;" id="stockTable">
        <thead class="table-dark">
        <tr>
            <th>⭐</th>
            <th>종목명</th>
            <th class="sortable" data-sort="price">현재가</th>
            <th class="sortable" data-sort="rate">등락률</th>
            <th class="sortable" data-sort="volume">거래량</th>
        </tr>
        </thead>
        <tbody id="stockTableBody"></tbody>
    </table>

</main>

<!-- 차트 모달 -->
<div class="modal fade" id="chartModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalTitle">종목 차트</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div id="chartContainer"></div>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="bg-dark text-light text-center py-4 mt-auto">
    <div class="container">
        <p class="mb-2">© 2025 StockCoin Project</p>
        <small class="text-muted">실시간 주식 · 코인 시세 플랫폼</small>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/priceStock.js"></script>

</body>
</html>